@using ApiService
@using ApiService.Helpers
@using ApiService.Models
@inject ApiService ApiService

<h3>Register</h3>

<input @bind="@email" placeholder="email"/>
<input @bind="@haslo" placeholder="haslo"/>

<button @onclick="() => { _ = ZarejestrujUzytkownika(); }">Zarejestruj</button>

@{
     if (isLoading)
     {
          <p>≈Åadowanie...</p>
     }

     if (wynik == null)
     {
          <p></p>
     }
     else
     {
          <p>@wynik.Error ?? @wynik.Data</p>
     }
}

@code {
     string email;
     string haslo;
     Result<bool>? wynik = null;
     bool isLoading = false;

     private async Task ZarejestrujUzytkownika()
     {
          isLoading = true;
          wynik = await ApiService.AdministracjaRepo.RejestracjaPost(new Autoryzacja
          {
               Haslo = haslo,
               Email = email,
          });
          isLoading = false;

          StateHasChanged();
     }

}

