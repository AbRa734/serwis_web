@page "/index"
@rendermode InteractiveServer

<PageTitle>Strona Główna</PageTitle>

<div class="home-container">
    <h2>Strona Główna</h2>

    <div class="top-section">
        <a class="tab-container" href="/services">
            <div class="tab-wrapper">
                <h3>Nowe zlecenie</h3>
                <p>Utwórz nowe zlecenie serwisowe</p>
                <div class="order-box">
                    <i class="fa-solid fa-plus" style="color: #8280FF"></i>
                </div>
            </div>
        </a>

        <a class="tab-container" href="/statistics">
            <div class="tab-wrapper">
                <h3>Statystyki</h3>
                <p>Śledź ilość i status wykonanych zleceń</p>
                <div class="statistics-box">
                    <i class="fa-solid fa-chart-simple" style="color: #4AD991"></i>
                </div>
            </div>
        </a>

        <a class="tab-container" href="/report">
            <div class="tab-wrapper">
                <h3>Raport</h3>
                <p>Podsumowanie wykonanych usług</p>
                <div class="report-box">
                    <i class="fa-solid fa-file" style="color: #FF9066"></i>
                </div>
            </div>
        </a>

    </div>

    <div class="add-comment">
        <div class="comment-top">
            <div class="comment-box">
                <i class="fa-regular fa-keyboard" style="color: #BA29FF; font-size: 32px;"></i>
            </div>
            <h3>Dodaj komentarz do usługi</h3>
        </div>
        <p>Podziel się swoją opinią na temat wykonanej usługi, aby ulepszyć jakość naszych usług</p>
    </div>

    <div class="add-rate">
        <div class="rate-top">
            <div class="rate-box">
                <i class="fa-solid fa-star" style="color: #FEC53D; font-size: 32px;"></i>
            </div>
            <h3>Oceń wykonaną usługę</h3>
        </div>
        <p>Wystaw ocenę, aby wyrazić swoje zadowolenie z realizacji naszych usług</p>
    </div>

    <div class="orders">
        <div class="orders-header">
            <h3>Ostatnie zlecenia</h3>
            <a class="see-more" href="orders">Zobacz więcej</a>
        </div>
        <div class="order-category">
            <div class="category-sort">
                <h4>Numer zlecenia</h4>
            </div>
            <div class="category-sort">
                <h4>Rodzaj</h4>
            </div>
            <div class="category-sort">
                <h4>Data utworzenia</h4>
            </div>
            <div class="category-sort">
                <h4>Data wykonania</h4>
            </div>
            <div class="category-sort">
                <h4>Koszt</h4>
            </div>
            <div class="category-sort">
                <h4>Status</h4>
            </div>
        </div>

        @{
            var displayOrders = orders.Take(3).ToList();
            for (int i = 0; i < displayOrders.Count; i++)
            {
                var order = displayOrders[i];
                <a href="/orders/@order.NumerZlecenia" class="single-order">
                    <div class="order-cell">@order.NumerZlecenia.ToString("D6")</div>
                    <div class="order-cell">@order.Rodzaj</div>
                    <div class="order-cell">@order.DataUtworzenia.ToString("dd.MM.yyyy")</div>
                    <div class="order-cell">@order.DataWykonania.ToString("dd.MM.yyyy")</div>
                    <div class="order-cell">@(order.Koszt > 0 ? $"{order.Koszt} zł" : "Nie określono")</div>
                    <div class="order-cell">
                        <span class="@GetStatusClass(order.Status)">@order.Status</span>
                    </div>
                </a>
                @if (i < displayOrders.Count - 1)
                {
                    <div class="single-order-line"></div>
                }
            }
        }

    </div>

</div>


@code {
    private class Order
    {
        public int NumerZlecenia { get; set; }
        public string Rodzaj { get; set; }
        public DateTime DataUtworzenia { get; set; }
        public DateTime DataWykonania { get; set; }
        public double Koszt { get; set; }
        public string Status { get; set; }
        public string Priorytet { get; set; }
    }

    private List<Order> orders = new List<Order>
    {
        new Order
        {
            NumerZlecenia = 1,
            Rodzaj = "Instalacja",
            DataUtworzenia = new DateTime(2025, 3, 14),
            DataWykonania = new DateTime(2025, 3, 28),
            Koszt = 300,
            Status = "Zakończone",
            Priorytet = "Wysoki"
        },
        new Order
        {
            NumerZlecenia = 2,
            Rodzaj = "Naprawa",
            DataUtworzenia = new DateTime(2025, 3, 20),
            DataWykonania = new DateTime(2025, 4, 5),
            Koszt = 450,
            Status = "Realizacja",
            Priorytet = "Wysoki"
        },
        new Order
        {
            NumerZlecenia = 3,
            Rodzaj = "Przegląd",
            DataUtworzenia = new DateTime(2025, 4, 1),
            DataWykonania = new DateTime(2025, 4, 15),
            Koszt = 0,
            Status = "Nowe",
            Priorytet = "Normalny"
        },
        new Order
        {
            NumerZlecenia = 4,
            Rodzaj = "Konfiguracja",
            DataUtworzenia = new DateTime(2025, 4, 10),
            DataWykonania = new DateTime(2025, 4, 20),
            Koszt = 250,
            Status = "Oczekujące",
            Priorytet = "Niski"
        },
        new Order
        {
            NumerZlecenia = 5,
            Rodzaj = "Wymiana",
            DataUtworzenia = new DateTime(2025, 4, 10),
            DataWykonania = new DateTime(2025, 4, 30),
            Koszt = 800,
            Status = "Realizacja",
            Priorytet = "Wysoki"
        },
        new Order
        {
            NumerZlecenia = 6,
            Rodzaj = "Konserwacja",
            DataUtworzenia = new DateTime(2025, 3, 28),
            DataWykonania = new DateTime(2025, 4, 12),
            Koszt = 150,
            Status = "Zakończone",
            Priorytet = "Normalny"
        },
        new Order
        {
            NumerZlecenia = 7,
            Rodzaj = "Diagnostyka",
            DataUtworzenia = new DateTime(2025, 3, 15),
            DataWykonania = new DateTime(2025, 3, 20),
            Koszt = 0,
            Status = "Anulowane",
            Priorytet = "Niski"
        },
        new Order
        {
            NumerZlecenia = 8,
            Rodzaj = "Modernizacja",
            DataUtworzenia = new DateTime(2025, 4, 5),
            DataWykonania = new DateTime(2025, 5, 1),
            Koszt = 1200,
            Status = "Oczekujące",
            Priorytet = "Wysoki"
        }
    };


    private string GetStatusClass(string status)
    {
        return status switch
        {
            "Zakończone" => "status-finished",
            "Realizacja" => "status-realization",
            "Anulowane" => "status-canceled",
            "Oczekujące" => "status-waiting",
            "Nowe" => "status-new",
            _ => ""
        };
    }
}